var mapWrapper=function(e,t,o,n){return"gmaps"==e?new gmaps(t,o,n):void 0},gmaps=function(e,t,o){this.map=null,this.markerLat=null,this.marketLng=null,this.EVENT_IDLE="idle",this.EVENT_CLICK="click",this.NAME_SPACE="google",this.globalMarkers=[],this.globalInfoWindows=[],this.mapInitialized=!1;var n=this;this.initialize=function(){this.map=new google.maps.Map(e,{center:{lat:t.lat,lng:t.lng},zoom:t.zoom}),this.findMyLocation();this.addListener("click",function(e){var t=n.addMarker(e.latLng.lat(),e.latLng.lng());n.removeMarkers(),n.markerLat=t.getPosition().lat(),n.markerLng=t.getPosition().lng(),n.globalMarkers.push(t)}),o&&o()},this.initializeBase=function(n,s,i){"undefined"!=typeof n&&n||(n=t.lat),"undefined"!=typeof s&&s||(s=t.lng),"undefined"!=typeof i&&i||(i=t.zoom),this.map=new google.maps.Map(e,{center:{lat:n,lng:s},zoom:i}),this.mapInitialized=!0,o&&o()},this.getMarkerLat=function(){return this.markerLat},this.getMarkerLng=function(){return this.markerLng},this.addListener=function(e,t){google.maps.event.addListener(this.map,e,t)},this.addMarker=function(e,t,o){return o||(o={}),o.map=this.map,o.position=this.getPosFromLatLng(e,t),new google.maps.Marker(o)},this.addInfoWindow=function(e){return new google.maps.InfoWindow({content:e})},this.addInfoToMarker=function(e,t,o,s){e.addListener(o,function(){"undefined"!=typeof s&&s&&n.closeInfoWindows(),t.open(n.map,e)})},this.getPosFromLatLng=function(e,t){return new google.maps.LatLng(e,t)},this.findMyLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};n.map.setCenter(t)},function(){console.log("Location not found!")}):console.log("Geolocation is not supported!")},this.addMarkerIconVector=function(e,t){return"undefined"==typeof e&&(e="#FFF"),"undefined"==typeof t&&(t="#000"),{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z M -2,-30 a 2,2 0 1,1 4,0 2,2 0 1,1 -4,0",fillColor:e,fillOpacity:1,strokeColor:t,strokeWeight:2,scale:1}},this.closeInfoWindows=function(e){("undefined"==typeof e||e.length<1)&&(e=this.globalInfoWindows);for(var t in e)e.hasOwnProperty(t)&&e[t].close()},this.removeMarkers=function(e){("undefined"==typeof e||e.length<1)&&(e=this.globalMarkers);for(var t in e)e.hasOwnProperty(t)&&e[t].setMap(null);("undefined"==typeof e||e.length<1)&&(this.globalMarkers=[])},this.addLoadingPane=function(){$(e).append('<div id="map-loader" style="font-weight: bold; position: relative; width:100%; height: 100%; background-color: #FFF; padding-top: 150px; padding-left: 150px;">LOADING...</div>')},this.removeLoadingPane=function(){$("#map-loader").remove()},this.getAddressOfMyLocation=function(e,t,o){if(!t||"undefined"==typeof t){var s=lscache.get("currentAddress");if(s)return console.log("from cache"),e(s)}return navigator.geolocation?void navigator.geolocation.getCurrentPosition(function(t){var s={lat:t.coords.latitude,lng:t.coords.longitude};if(!google)return s;var i=new google.maps.Geocoder;i.geocode({location:s},function(t,s){if(s===google.maps.GeocoderStatus.OK){o&&"undefined"!=typeof o||(o=100);var i=n.parseAddressResult(t);lscache.set("currentAddress",i,o),e(i)}})}):!1},this.setCenter=function(e,t){this.map.setCenter(this.getPosFromLatLng(e,t))},this.getCenter=function(e){return"undefined"!=typeof e&&e||(e=this.map),{lat:e.getCenter().lat(),lng:e.getCenter().lng()}},this.setZoom=function(e){this.map.setZoom(e)},this.getZoom=function(){return this.map.getZoom()},this.parseAddressResult=function(e){var t={formatted_address:e[0].formatted_address,lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};return $.each(e,function(e,o){if("country"==o.types[0])t.country=o.address_components[0].long_name,t.country_code=o.address_components[0].short_name;else if("administrative_area_level_1"==o.types[0])t.city=o.address_components[0].long_name;else if("administrative_area_level_2"==o.types[0])t.county=o.address_components[0].long_name;else if("administrative_area_level_4"==o.types[0])t.district=o.address_components[0].long_name;else if("street_address"==o.types[0]||"route"==o.types[0])for(var n in o.address_components)"street_number"==o.address_components[n].types[0]?t.street_no=o.address_components[n].long_name:"route"==o.address_components[n].types[0]&&(o.address_components[n].long_name.match(/sokak/i)?t.street=o.address_components[n].short_name:t.avenue=o.address_components[n].short_name);else"postal_code"==o.types[0]&&(t.zip=o.address_components[0].short_name)}),t},this.addressFromLatLng=function(e,t,o){var n=this,s=new google.maps.Geocoder;s.geocode({location:{lat:e,lng:t}},function(e,t){t===google.maps.GeocoderStatus.OK&&o(n.parseAddressResult(e))})},this.latLngFromAddress=function(e,t){var o=new google.maps.Geocoder;o.geocode({address:e},function(e,o){o===google.maps.GeocoderStatus.OK&&t&&t(e[0].geometry.location.lat(),e[0].geometry.location.lng())})},this.triggerEvent=function(e,t){return new google.maps.event.trigger(e,t)},this.resizeFix=function(){var e=this.getCenter();this.triggerEvent(this.map,"resize"),this.setCenter(e.lat,e.lng)}};